#!/bin/sh

# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘     Instalador de Dotfiles con     â•‘
# â•‘         Stow - por migbert         â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# â”€â”€â”€â”€â”€ ðŸŽ¨ Colores â”€â”€â”€â”€â”€
CRE=$(tput setaf 1)   # Rojo
CYE=$(tput setaf 3)   # Amarillo
CGR=$(tput setaf 2)   # Verde
CBL=$(tput setaf 4)   # Azul
BLD=$(tput bold)      # Negrita
CNC=$(tput sgr0)      # Reset

# â”€â”€â”€â”€â”€ ðŸ“ Variables â”€â”€â”€â”€â”€
DOTFILES_DIR="$HOME/dotfiles"
ERROR_LOG="$HOME/dotfiles_install_error.log"

# â”€â”€â”€â”€â”€ ðŸ–¼ Logo â”€â”€â”€â”€â”€
logo() {

  local text="${1:?}"
  echo -en "


â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â–ˆâ–ˆâ•”â•â•â•
â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•   â–ˆâ–ˆâ•‘   
â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   
â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   
â•šâ•â•     â•šâ•â•â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•   â•šâ•â•   
                                                        
    Mis Dotfiles\n\n"
  printf   "${BLD}${CRE}[ ${CYE}${text} ${CRE}]${CNC}\n\n"
}

# â”€â”€â”€â”€â”€ âš ï¸ Registrar errores â”€â”€â”€â”€â”€
log_error() {
    msg=$1
    ts=$(date +"%F %T")
    echo "[${ts}] ERROR: $msg" >> "$ERROR_LOG"
    echo "${CRE}${BLD}ERROR:${CNC} $msg" >&2
}

# â”€â”€â”€â”€â”€ ðŸ§¾ Resultados por secciÃ³n â”€â”€â”€â”€â”€
SUMMARY=""
add_summary() {
    local status="$1"  # âœ”, âŒ, âš 
    local label="$2"   # DescripciÃ³n
    SUMMARY="${SUMMARY}${status} ${label}\n"
}

# â”€â”€â”€â”€â”€ âœ… Verificaciones iniciales â”€â”€â”€â”€â”€
initial_checks() {
    if [ "$(id -u)" = 0 ]; then
        log_error "No ejecutes este script como root."
        exit 1
    fi
    if [ ! -d "$DOTFILES_DIR" ]; then
        log_error "No se encontrÃ³ el directorio '$DOTFILES_DIR'."
        exit 1
    fi
        # Verificar directorio HOME
    if [ "$PWD" != "$HOME" ]; then
        log_error "El script debe ejecutarse desde el directorio HOME."
        exit 1
    fi
    # Verificar conexiÃ³n a internet
    if ! ping -q -c 1 -W 1 8.8.8.8 >/dev/null 2>&1; then
        log_error "No se detectÃ³ conexiÃ³n a internet."
        exit 1
    fi
}

# â”€â”€â”€â”€â”€ ðŸ” Verifica si un paquete estÃ¡ instalado â”€â”€â”€â”€â”€
is_installed() {
    pacman -Q "$1" >/dev/null 2>&1
}

# â”€â”€â”€â”€â”€ ðŸ“¦ Instalar dependencias con validaciÃ³n â”€â”€â”€â”€â”€
install_dependencies() {
    clear
    logo "Instalando paquetes necesarios desde los repositorios oficiales..."
    sleep 1

    # Actualizar mirrors si reflector estÃ¡ instalado
    if is_installed reflector; then
        printf "%b\n" "${BLD}${CGR}Actualizando lista de mirrors con reflector...${CNC}"
        sudo reflector --verbose --age 12 --fastest 10 --score 10 --protocol https \
                       --latest 8 --sort rate --save /etc/pacman.d/mirrorlist
        sudo pacman -Syy
    else
        printf "%b\n" "${BLD}${CYE}Reflector no estÃ¡ instalado. Saltando actualizaciÃ³n de mirrors...${CNC}"
    fi

    # Lista de paquetes necesarios
    dependencies="
        btop conky microsoft-edge-stable-bin google-chrome gimp inkscape thunderbird auto-cpufreq tlp acpi acpid xprintidle docker docker-compose php keepassxc nextcloud-client plank vlc syncthing obs-studio telegram-desktop signal-desktop shotcut visual-studio-code-bin wireguird stow ripgrep fastfetch udiskie ffmpegthumbnailer unrar p7zip zip unzip lrzip sed curl lazygit dex eza bluez bluez-utils polkit-gnome gnome-keyring ranger tldr zoxide fd xclip lxappearance jq xdg-desktop-portal ffmpeg xdg-desktop-portal-gtk xorg-xwininfo bat brightnessctl zram-generator gparted rsync
    "

    printf "\n%b\n\n" "${BLD}${CBL}Verificando paquetes requeridos...${CNC}"
    sleep 1

    # Buscar paquetes faltantes
    missing_pkgs=""
    for pkg in $dependencies; do
        if ! is_installed "$pkg"; then
            missing_pkgs="$missing_pkgs $pkg"
            printf "  %b %b\n" "${BLD}${CYE}âœ˜ $pkg${CNC}" "${CRE}(no instalado)${CNC}"
        else
            printf "  %b %b\n" "${BLD}${CGR}âœ” $pkg${CNC}" "${CBL}(ya instalado)${CNC}"
        fi
    done

    # Instalar si hay paquetes faltantes
    if [ -n "$missing_pkgs" ]; then
        total=$(echo "$missing_pkgs" | wc -w)
        printf "\n%b %s\n\n" "${BLD}${CYE}Instalando $total paquetes faltantes...${CNC}" "$missing_pkgs"

        if sudo pacman -S --noconfirm $missing_pkgs 2>&1 | tee -a "$ERROR_LOG" >/dev/null; then
            failed=""
            for pkg in $missing_pkgs; do
                is_installed "$pkg" || failed="$failed $pkg"
            done

            if [ -z "$failed" ]; then
                printf "%b\n\n" "${BLD}${CGR}âœ… Â¡Todos los paquetes fueron instalados correctamente!${CNC}"
            else
                fail_count=$(echo "$failed" | wc -w)
                printf "%b\n" "${BLD}${CRE}âŒ Fallaron $fail_count paquetes:${CNC}"
                printf "  %s\n" "$failed"
            fi
        else
            log_error "Error crÃ­tico al instalar: $missing_pkgs"
            printf "%b\n" "${BLD}${CRE}âš ï¸ FallÃ³ la instalaciÃ³n. Revisa el archivo de log.${CNC}"
            return 1
        fi
    else
        printf "\n%b\n" "${BLD}${CGR}âœ… Todos los paquetes ya estÃ¡n instalados.${CNC}"
    fi

    sleep 2
}
# â”€â”€â”€â”€â”€ ðŸ“¥ Clonar dotfiles desde un repositorio â”€â”€â”€â”€â”€
clone_dotfiles() {
    clear
    logo "Descargando Dotfiles..."

    # Cambia esta URL por la de tu repositorio personal
    repo_url="https://github.com/migbertweb/dotfiles"
    repo_dir="$HOME/dotfiles"
    timestamp=$(date +"%Y%m%d-%H%M%S")
    sleep 1

    # Si ya existe el directorio, hacer backup
    if [ -d "$repo_dir" ]; then
        backup_dir="${repo_dir}_respaldo_$timestamp"
        printf "%b\n" "${BLD}${CYE}Directorio existente encontrado.${CNC}"
        printf "%b\n" "${BLD}${CYE}Moviendo '$repo_dir' a '${CBL}${backup_dir}${CNC}'"
        mv -v "$repo_dir" "$backup_dir"
    fi

    # Clonar desde el repositorio
    printf "%b\n" "${BLD}${CBL}Clonando desde: ${repo_url}${CNC}"
    if git clone --depth=1 "$repo_url" "$repo_dir" >> "$ERROR_LOG" 2>&1; then
        printf "%b\n\n" "${BLD}${CGR}âœ… Dotfiles clonados correctamente en '$repo_dir'${CNC}"
    else
        log_error "Fallo al clonar el repositorio: $repo_url"
        printf "%b\n" "${BLD}${CRE}âŒ Error al clonar. Revisa el log: ${CYE}$ERROR_LOG${CNC}"
        return 1
    fi

    sleep 2
}

# â”€â”€â”€â”€â”€ ðŸ—ƒï¸ Respaldar configuraciones existentes â”€â”€â”€â”€â”€
backup_existing_config() {
    clear
    logo "Respaldando configuraciones existentes..."

    fecha=$(date +%Y%m%d-%H%M%S)
    backup_folder="$HOME/.dotfiles_backup_$fecha"
    mkdir -p "$backup_folder" 2>> "$ERROR_LOG"

    printf "%b\n\n" "${BLD}${CYE}Directorio de respaldo: ${CBL}$backup_folder${CNC}"
    sleep 1

    # â”€â”€ FunciÃ³n interna para mover â”€â”€
    backup_item() {
        tipo=$1
        ruta=$2
        nombre=$3

        existe=0
        [ "$tipo" = "d" ] && [ -d "$ruta" ] && existe=1
        [ "$tipo" = "f" ] && [ -f "$ruta" ] && existe=1

        if [ "$existe" -eq 1 ]; then
            if mv "$ruta" "$backup_folder/${nombre}_${fecha}" 2>> "$ERROR_LOG"; then
                printf " %b%s %sâœ” Copia realizada%s\n" "$BLD" "$nombre" "$CGR" "$CNC"
            else
                log_error "Error al respaldar: $nombre"
                printf " %b%s %sâœ˜ Fallo al copiar%s\n" "$BLD$CRE" "$nombre" "$CYE" "$CNC"
            fi
        else
            printf " %b%s %s(no encontrado)%s\n" "$BLD$CYE" "$nombre" "$CBL" "$CNC"
        fi
        sleep 0.3
    }

    # â”€â”€ Carpetas de configuraciÃ³n principales â”€â”€
    config_folders="
        alacritty bat conky environment.d gtk-3.0 kitty mpd ncmpcpp nvim paru ranger tmux
    "

    for folder in $config_folders; do
        backup_item d "$HOME/.config/$folder" "$folder"
    done

    # â”€â”€ Archivos sueltos â”€â”€
    single_files="
        $HOME/.zshrc
        $HOME/.gtkrc-2.0
        $HOME/.icons
    "

    for item in $single_files; do
        base=$(basename "$item")
        [ "$base" = ".icons" ] && backup_item d "$item" "$base" || backup_item f "$item" "$base"
    done

    printf "\n%b\n\n" "${BLD}${CGR}âœ… Respaldo completo.${CNC}"
    sleep 2
}


# â”€â”€â”€â”€â”€ ðŸ§© Enlazar dotfiles con Stow â”€â”€â”€â”€â”€
stow_dotfiles() {
    clear
    logo "ðŸ§© Aplicando enlaces simbÃ³licos con Stow..."

    cd "$DOTFILES_DIR" || {
        log_error "No se pudo acceder al directorio \$DOTFILES_DIR: $DOTFILES_DIR"
        return 1
    }

    # Enlazar config/ a ~/.config
    if [ -d config ]; then
        echo "â†’ Enlazando 'config' a ~/.config"
        if stow --target="$HOME/.config" config; then
            echo "${CGR}âœ” Enlace de 'config' completado.${CNC}"
        else
            log_error "âŒ Error al enlazar 'config' a ~/.config"
        fi
    else
        echo "${CYE}âš ï¸  Carpeta 'config' no encontrada. Omitiendo...${CNC}"
    fi

    # Enlazar home/ a ~
    if [ -d home ]; then
        echo "â†’ Enlazando 'home' a ~"
        if stow --target="$HOME" home; then
            echo "${CGR}âœ” Enlace de 'home' completado.${CNC}"
        else
            log_error "âŒ Error al enlazar 'home' a ~"
        fi
    else
        echo "${CYE}âš ï¸  Carpeta 'home' no encontrada. Omitiendo...${CNC}"
    fi

    # Copiar misc/ a ~/.local/
    if [ -d misc ]; then
        echo "â†’ Copiando contenido de 'misc' a ~/.local/ con rsync"
        mkdir -p "$HOME/.local"
        if rsync -a misc/ "$HOME/.local/"; then
            echo "${CGR}âœ” Copia de 'misc' completada.${CNC}"
        else
            log_error "âŒ Error al copiar contenido de 'misc' a ~/.local/"
        fi
    else
        echo "${CYE}âš ï¸  Carpeta 'misc' no encontrada. Omitiendo...${CNC}"
    fi

    cd - >/dev/null || true
}
# â”€â”€â”€â”€â”€ ðŸ“‚ Copiar dotfiles/bspwm â†’ ~/.config/bspwm (sin borrar nada) â”€â”€â”€â”€â”€
merge_bspwm_config() {
    SRC="$DOTFILES_DIR/bspwm"
    DEST="$HOME/.config/bspwm"

    logo "Actualizando configuraciÃ³n de BSPWM (sin borrar contenido)..."

    if [ ! -d "$SRC" ]; then
        log_error "No se encontrÃ³ la carpeta '$SRC'."
        add_summary "âš " "No se encontrÃ³ 'bspwm' en dotfiles"
        return 1
    fi

    mkdir -p "$DEST"

    echo "${CBL}ðŸ“ Copiando archivos desde '${SRC}' a '${DEST}'...${CNC}"
    if rsync -a "$SRC/" "$DEST/" 2>> "$ERROR_LOG"; then
        echo "${CGR}âœ” ConfiguraciÃ³n de BSPWM actualizada (sin borrar archivos existentes).${CNC}"
        add_summary "âœ”" "bspwm actualizado sin borrar"
    else
        log_error "Error al copiar archivos a ~/.config/bspwm"
        add_summary "âŒ" "Error al actualizar bspwm"
        return 1
    fi
}

# â”€â”€â”€â”€â”€ ðŸ³ ConfiguraciÃ³n de Docker â”€â”€â”€â”€â”€
configure_docker() {
    clear
    logo "Configurando Docker..."
    sleep 1

    echo "${BLD}${CBL}ðŸ”§ Verificando estado del servicio Docker...${CNC}"
    if systemctl is-enabled --quiet docker.service && systemctl is-active --quiet docker.service; then
        echo "${CGR}âœ” Docker ya estÃ¡ habilitado y en ejecuciÃ³n.${CNC}"
    else
        echo "${CBL}ðŸ”§ Habilitando e iniciando Docker...${CNC}"
        if sudo systemctl enable --now docker.service; then
            echo "${CGR}âœ” Docker habilitado y en ejecuciÃ³n.${CNC}"
        else
            log_error "No se pudo habilitar o iniciar el servicio docker.service"
            return 1
        fi
    fi

    sleep 2

    echo "${CBL}ðŸ‘¤ Verificando si el usuario '$USER' ya pertenece al grupo 'docker'...${CNC}"
    if groups "$USER" | grep -qw docker; then
        echo "${CGR}âœ” Usuario ya estÃ¡ en el grupo docker.${CNC}"
    else
        echo "${CBL}âž• AÃ±adiendo usuario al grupo docker...${CNC}"
        if sudo usermod -aG docker "$USER"; then
            echo "${CGR}âœ” Usuario aÃ±adido al grupo docker.${CNC}"
            echo "${CYE}âš ï¸  Ejecuta 'newgrp docker' o cierra sesiÃ³n para aplicar los cambios.${CNC}"
        else
            log_error "No se pudo aÃ±adir el usuario '$USER' al grupo docker"
            return 1
        fi
    fi

    sleep 2
}

# â”€â”€â”€â”€â”€ ðŸ”„ Habilitar Syncthing como servicio de usuario â”€â”€â”€â”€â”€
configure_syncthing() {
    clear
    logo "Habilitando el servicio de SYNCTHING"

    printf "\n%s%sðŸ”§ Verificando estado de Syncthing (usuario)...%s\n" "${BLD}" "${CYE}" "${CNC}"

    if systemctl --user is-enabled --quiet syncthing.service && systemctl --user is-active --quiet syncthing.service; then
        printf "%s%sâœ” Syncthing ya estÃ¡ habilitado y en ejecuciÃ³n.%s\n\n" "${BLD}" "${CGR}" "${CNC}"
    else
        printf "%s%sâž• Habilitando e iniciando syncthing.service...%s\n" "${BLD}" "${CBL}" "${CNC}"
        if systemctl --user enable --now syncthing.service; then
            printf "%s%sâœ… Â¡Syncthing habilitado correctamente!%s\n\n" "${BLD}" "${CGR}" "${CNC}"
        else
            log_error "No se pudo habilitar el servicio syncthing.service (usuario)"
            return 1
        fi
    fi

    sleep 2
}

# â”€â”€â”€â”€â”€ âš¡ Habilitar auto-cpufreq y TLP â”€â”€â”€â”€â”€
configure_power_services() {
    clear
    logo "Habilitando servicios de optimizaciÃ³n de energÃ­a"

    echo "${CBL}âš™ï¸  Verificando estado de auto-cpufreq...${CNC}"
    if systemctl is-enabled --quiet auto-cpufreq.service && systemctl is-active --quiet auto-cpufreq.service; then
        echo "${CGR}âœ” auto-cpufreq ya estÃ¡ activo.${CNC}"
    else
        echo "${CBL}âž• Habilitando auto-cpufreq...${CNC}"
        if sudo systemctl enable --now auto-cpufreq.service; then
            echo "${CGR}âœ” auto-cpufreq habilitado.${CNC}"
        else
            log_error "No se pudo habilitar auto-cpufreq.service"
        fi
    fi

    echo "${CBL}âš™ï¸  Verificando estado de TLP...${CNC}"
    if systemctl is-enabled --quiet tlp.service && systemctl is-active --quiet tlp.service; then
        echo "${CGR}âœ” TLP ya estÃ¡ activo.${CNC}"
    else
        echo "${CBL}âž• Habilitando TLP...${CNC}"
        if sudo systemctl enable --now tlp.service; then
            echo "${CGR}âœ” TLP habilitado.${CNC}"
        else
            log_error "No se pudo habilitar tlp.service"
        fi
    fi

    sleep 2
}

# â”€â”€â”€â”€â”€ ðŸ§  Habilitar ZRAM con systemd zram-generator â”€â”€â”€â”€â”€
configure_zram() {
    clear
    logo "Habilitando ZRAM"

    CONFIG_FILE="/etc/systemd/zram-generator.conf"
    SERVICE_NAME="systemd-zram-setup@zram0"

    # Solicitar privilegios si no se tiene
    if [ "$(id -u)" -ne 0 ]; then
        echo "${CYE}ðŸ” Se requieren privilegios de superusuario. Solicitando...${CNC}"
        if ! sudo -v; then
            echo "${CRE}${BLD}No se pudo obtener acceso root. Abortando.${CNC}"
            return 1
        fi
    fi

    # Verificar si el archivo ya existe
    if [ -f "$CONFIG_FILE" ]; then
        echo "${CYE}âš ï¸  La configuraciÃ³n de ZRAM ya existe en:${CNC} $CONFIG_FILE"
    else
        echo "${CBL}ðŸ“„ Creando configuraciÃ³n ZRAM en:${CNC} $CONFIG_FILE"
        sudo tee "$CONFIG_FILE" > /dev/null <<EOF
[zram0]
zram-size = ram * 0.25
compression-algorithm = zstd
swap-priority = 100
EOF
    fi

    # Verificar si el servicio ya estÃ¡ habilitado y activo
    echo "${CBL}ðŸ”„ Verificando estado de ${SERVICE_NAME}...${CNC}"
    if systemctl is-enabled --quiet "$SERVICE_NAME" && systemctl is-active --quiet "$SERVICE_NAME"; then
        echo "${CGR}âœ” ZRAM ya estÃ¡ habilitado y activo.${CNC}"
    else
        echo "${CBL}âž• Activando ZRAM...${CNC}"
        sudo systemctl daemon-reload
        sudo systemctl start "$SERVICE_NAME"
    fi
    echo ""
    echo "${CBL}ðŸ“ˆ Resumen actual de ZRAM:${CNC}"
    zramctl

    sleep 2
    clear
}

# â”€â”€â”€â”€â”€ â–¶ï¸ EjecuciÃ³n â”€â”€â”€â”€â”€
main() {
    logo "ðŸ›  Instalador de Dotfiles"
    initial_checks

    #install_dependencies && add_summary "âœ”" "Dependencias verificadas e instaladas" || add_summary "âŒ" "FallÃ³ la instalaciÃ³n de dependencias"

    clone_dotfiles && add_summary "âœ”" "Dotfiles clonados" || add_summary "âŒ" "Fallo al clonar los dotfiles"

    backup_existing_config && add_summary "âœ”" "Configuraciones respaldadas" || add_summary "âŒ" "Error al respaldar configuraciones"

    stow_dotfiles && add_summary "âœ”" "Dotfiles enlazados con Stow" || add_summary "âŒ" "Error al aplicar Stow"
    
    merge_bspwm_config && add_summary "âœ”" "ConfiguraciÃ³n de BSPWM actualizada" || add_summary "âŒ" "Error al actualizar BSPWM"

    configure_docker && add_summary "âœ”" "Docker configurado" || add_summary "âŒ" "Fallo en configuraciÃ³n de Docker"

    configure_syncthing && add_summary "âœ”" "Syncthing habilitado" || add_summary "âŒ" "Fallo al habilitar Syncthing"

    configure_power_services && add_summary "âœ”" "Servicios de energÃ­a habilitados" || add_summary "âŒ" "Fallo al habilitar servicios de energÃ­a"

    configure_zram && add_summary "âœ”" "ZRAM habilitado" || add_summary "âŒ" "Fallo en configuraciÃ³n de ZRAM"

    echo ""
    echo "${BLD}${CBL}ðŸ“‹ Resumen de la instalaciÃ³n:${CNC}"
    echo -e "${SUMMARY}"
    
    echo "${BLD}${CGR}âœ… Todo configurado. Reinicia tu sesiÃ³n para aplicar los cambios.${CNC}"
}


main
